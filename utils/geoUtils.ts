
export const CHINA_PROVINCES = [
  "北京", "天津", "上海", "重庆", "河北", "山西", "辽宁", "吉林", "黑龙江", 
  "江苏", "浙江", "安徽", "福建", "江西", "山东", "河南", "湖北", "湖南", 
  "广东", "海南", "四川", "贵州", "云南", "陕西", "甘肃", "青海", "台湾", 
  "内蒙古", "广西", "西藏", "宁夏", "新疆", "香港", "澳门"
];

const NICKNAME_MAP: Record<string, string> = {
  "粤": "广东", "苏": "江苏", "浙": "浙江", "京": "北京", "沪": "上海", "津": "天津", "渝": "重庆",
  "冀": "河北", "豫": "河南", "鲁": "山东", "晋": "山西", "陕": "陕西", "秦": "陕西", "陇": "甘肃",
  "甘": "甘肃", "辽": "辽宁", "吉": "吉林", "黑": "黑龙江", "徽": "安徽", "闽": "福建", "赣": "江西",
  "鄂": "湖北", "湘": "湖南", "琼": "海南", "川": "四川", "黔": "贵州", "滇": "云南", "青": "青海",
  "藏": "西藏", "桂": "广西", "蒙": "内蒙古", "宁": "宁夏", "新": "新疆", "台": "台湾", "港": "香港", "澳": "澳门"
};

// 主要城市到省份的映射，用于增强识别能力
const CITY_TO_PROVINCE_MAP: Record<string, string> = {
  "南京": "江苏", "苏州": "江苏", "无锡": "江苏", "常州": "江苏", "南通": "江苏",
  "杭州": "浙江", "宁波": "浙江", "温州": "浙江", "嘉兴": "浙江", "绍兴": "浙江",
  "广州": "广东", "深圳": "广东", "珠海": "广东", "东莞": "广东", "佛山": "广东",
  "济南": "山东", "青岛": "山东", "烟台": "山东",
  "福州": "福建", "厦门": "福建", "泉州": "福建",
  "武汉": "湖北", "宜昌": "湖北",
  "长沙": "湖南", "岳阳": "湖南",
  "郑州": "河南", "洛阳": "河南",
  "成都": "四川", "绵阳": "四川",
  "西安": "陕西", "宝鸡": "陕西",
  "沈阳": "辽宁", "大连": "辽宁",
  "长春": "吉林", "吉林市": "吉林",
  "哈尔滨": "黑龙江", "大庆": "黑龙江",
  "石家庄": "河北", "唐山": "河北",
  "合肥": "安徽", "芜湖": "安徽",
  "南昌": "江西", "九江": "江西",
  "昆明": "云南", "贵阳": "贵州", "南宁": "广西", "海口": "海南", "三亚": "海南",
  "兰州": "甘肃", "西宁": "青海", "银川": "宁夏", "乌鲁木齐": "新疆", "呼和浩特": "内蒙古", "拉萨": "西藏"
};

/**
 * 将输入的地域字符串（省、市、简称等）标准化为省份全称
 */
export const normalizeToProvince = (input: string): string => {
  if (!input) return "其他区域";
  
  // 1. 检查是否包含标准省份全称
  for (const p of CHINA_PROVINCES) {
    if (input.includes(p)) return p;
  }

  // 2. 检查是否匹配已知城市
  for (const [city, province] of Object.entries(CITY_TO_PROVINCE_MAP)) {
    if (input.includes(city)) return province;
  }

  // 3. 检查是否以简称开头
  const firstChar = input.charAt(0);
  if (NICKNAME_MAP[firstChar]) {
    return NICKNAME_MAP[firstChar];
  }

  return "其他区域";
};
